<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OPOR – Profil</title>
<style>
body {
  margin:0; font-family:"Times New Roman", serif;
  background:#f5f5f5; color:#325774;
}
header, footer {
  background:#111; color:#9baebe; text-align:center; padding:20px 0;
}
header h1 { margin:0; }
.container {
  max-width:900px; margin:40px auto; padding:0 20px; display:flex; flex-direction:column; gap:30px;
}
.user-info {
  background:white; padding:20px; border-radius:12px; box-shadow:0 0 20px #32577422; text-align:center;
}
.cards {
  display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;
}
.card {
  background:white; padding:20px; border-radius:12px; box-shadow:0 0 15px #32577422;
  cursor:pointer; transition:transform 0.2s, box-shadow 0.2s;
  display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:150px;
  text-align:center;
}
.card:hover { transform:scale(1.05); box-shadow:0 0 25px #32577444; }
.card h2 { margin-bottom:10px; }
button { padding:10px 15px; border:none; border-radius:6px; background:#325774; color:white; cursor:pointer; font-weight:bold; }
button:hover { background:#4d7ea8; }

/* ===================== SIDEBAR ===================== */
.sidenav {
  position: fixed;
  top: 0;
  left: 0;

  width: 180px;
  height: 100vh;

  background: #111;
  padding-top: 60px;

  transform: translateX(-100%);
  transition: transform 0.35s ease;
  transition-delay: 0.4s; /* delay close */

  z-index: 999;
}

.edge-trigger:hover + .sidenav,
.sidenav:hover {
  transform: translateX(0);
  transition-delay: 0s; /* open instantly */
}

.sidenav a {
  display: block;
  padding: 12px 20px;
  font-size: 22px;
  color: #818181;
  text-decoration: none;
}

.sidenav a:hover {
  color: #f1f1f1;
}

/* EDGE INDICATOR */
.edge-trigger {
  position: fixed;
  top: 0;
  left: 0;
  width: 14px;
  height: 100vh;
  z-index: 1000;
}

.edge-indicator {
  position: absolute;
  top: 50%;
  left: 4px;
  width: 6px;
  height: 60px;
  background: #9baebe;
  opacity: 0.35;
  transform: translateY(-50%);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.edge-trigger:hover .edge-indicator {
  opacity: 0.8;
  transform: translateY(-50%) scaleY(1.2);
}

</style>
</head>
<body>

<header>
  <h1>OPOR Profil</h1>
</header>

<div class="container">
  <!-- User info -->
  <div class="user-info">
    <h2 id="welcome">Willkommen, User</h2>
    <p>E-Mail: <span id="userEmail">user@email.com</span></p>
  </div>

  <!-- Action cards -->
  <div class="cards">
    <div class="card" id="deleteAcc">
      <h2>Account löschen</h2>
      <p>Löscht dein Konto dauerhaft.</p>
      <button>Jetzt löschen</button>
    </div>

    <div class="card" id="archiveAcc">
      <h2>Account archivieren</h2>
      <p>Archiviert deinen Account temporär.</p>
      <button>Archivieren</button>
    </div>

    <div class="card" id="miniGame">
      <h2>Mini-Game</h2>
      <p>Starte das kleine Spiel!</p>
      <button>Spiel starten!</button>
      <p>Score: <span id="miniScore">0</span></p>
    </div>

    <div class="card" id="logout">
      <h2>Logout</h2>
      <p>Verlasse dein Profil.</p>
      <button>Logout</button>
    </div>
  </div>
</div>

<footer>
  &copy; 2026 OPOR – Alle Rechte vorbehalten
</footer>

<script>
// Load user info
const currentUser = localStorage.getItem("opor_currentUser");
const users = JSON.parse(localStorage.getItem("opor_users") || "{}");
if(currentUser && users[currentUser]){
  document.getElementById("welcome").textContent = `Willkommen, ${users[currentUser].username}`;
  document.getElementById("userEmail").textContent = users[currentUser].email || "Keine E-Mail";
}

// Delete Account
document.querySelector("#deleteAcc button").onclick = () => {
  if(confirm("Willst du dein Konto wirklich löschen?")){
    delete users[currentUser];
    localStorage.setItem("opor_users", JSON.stringify(users));
    localStorage.removeItem("opor_currentUser");
    window.location.href = "auth.html";
  }
}

// Archive Account (just disables login)
document.querySelector("#archiveAcc button").onclick = () => {
  if(confirm("Account archivieren? Du kannst dich später wieder anmelden.")){
    users[currentUser].archived = true;
    localStorage.setItem("opor_users", JSON.stringify(users));
    alert("Account archiviert!");
  }
}

// Logout
document.querySelector("#logout button").onclick = () => {
  localStorage.removeItem("opor_currentUser");
  window.location.href = "auth.html";
}

// Mini-Game stub
let score = users[currentUser]?.calculatorData?.miniScore || 0;
document.getElementById("miniScore").textContent = score;

// Mini-Game stub
document.querySelector("#miniGame button").onclick = () => {
  window.location.href = "game.html"; // redirect to mini-game page
};

</script>

<!-- EDGE TRIGGER -->
<div class="edge-trigger">
  <div class="edge-indicator"></div>
</div>

<!-- SIDEBAR -->
<nav class="sidenav">
  <a href="about.html" target="_blank" rel="noopener">About</a>
  <a href="services.html" target="_blank" rel="noopener">Services</a>
  <a href="rechner-startpage.html" target="_blank" rel="noopener">Rechner</a>
  <a href="contact.html" target="_blank" rel="noopener">Contact</a>
  <a href="auth.html" target="_blank" rel="noopener">Login</a>
  <a href="register.html" target="_blank" rel="noopener">Register</a>
  <a href="profile.html" target="_blank" rel="noopener">Profile</a>
</nav>



</body>
</html>
